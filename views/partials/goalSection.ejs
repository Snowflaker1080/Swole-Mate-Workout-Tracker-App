<% const goal = existingGoals[goalType]; %>

<div class="field">
  <label class="checkbox">
    <input
      type="checkbox"
      name="selectedGoals"
      value="<%= goalType %>"
      class="goal-toggle"
      data-target="<%= goalType %>Fields"
      <%= goal ? 'checked' : '' %>
    >
    <strong><%= goalLabel %></strong>
  </label>
</div>

<div id="<%= goalType %>Fields" class="box <%= goal ? '' : 'is-hidden' %>">

  <!-- Start Value -->
  <div class="field">
    <label class="label">Start <%= goalUnit %></label>
    <div class="control">
      <input
        class="input"
        type="number"
        name="<%= goalType %>[startValue]"
        step="<%= step %>"
        min="<%= min %>"
        max="<%= max %>"
        value="<%= goal?.startValue || '' %>"
      >
    </div>
  </div>

  <!-- Target Value -->
  <div class="field">
    <label class="label">Target <%= goalUnit %></label>
    <div class="control">
      <input
        class="input"
        type="number"
        name="<%= goalType %>[targetValue]"
        step="<%= step %>"
        min="<%= min %>"
        max="<%= max %>"
        value="<%= goal?.targetValue || '' %>"
      >
    </div>
  </div>

  <!-- Hidden unit input (optional) -->
  <% if (goalType === 'weight') { %>
    <input type="hidden" name="<%= goalType %>[unit]" value="kg">
  <% } else if (goalType === 'bodyFat') { %>
    <input type="hidden" name="<%= goalType %>[unit]" value="%">
  <% } else if (goalType === 'restingHR') { %>
    <input type="hidden" name="<%= goalType %>[unit]" value="bpm">
  <% } else if (goalType === 'vo2Max') { %>
    <input type="hidden" name="<%= goalType %>[unit]" value="ml/kg/min">
  <% } %>

  <!-- Start Date -->
  <div class="field">
    <label class="label">Start Date</label>
    <div class="control">
      <input
        class="input"
        type="date"
        name="<%= goalType %>[startDate]"
        value="<%= goal?.startDate ? goal.startDate.toISOString().split('T')[0] : '' %>"
      >
    </div>
  </div>

  <!-- Target Date -->
  <div class="field">
    <label class="label">Target Date</label>
    <div class="control">
      <input
        class="input"
        type="date"
        name="<%= goalType %>[targetDate]"
        value="<%= goal?.targetDate ? goal.targetDate.toISOString().split('T')[0] : '' %>"
      >
    </div>
  </div>

</div>